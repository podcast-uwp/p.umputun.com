---
title: Львиные впечатления
date: 2011-07-31T14:20:40-05:00
draft: false
tags: ["технические темы"]
---

С момента выхода OSX 10.7 уже прошло некоторое время, и он как минимум неделю стоит на всех моих домашних (личных и рабочих) машинках. Да, весь мой, немалый парк домашних компьютеров уже живет на 10.7 и включает в себя 3 MBP разных поколений, iMac и 2 Mac Mini. По результатам и впечатлениям - в целом это вполне удачный апдейт. В моем понимании удачность оценивается тем, что он не особо деструктивен. Т.е. по большому счету, это обновление почти не помешало мне в работе и не очень помешало в прочей компьютерной деятельности. Возможно, это звучит не сильно оптимистично, но то, что подобного рода обновления вызывают множество проблем - это, увы, факт жизни на любых ОС и всегда переход на свежатинку происходит с разной степенью болезненности. Например переход с RHEL4 на RHEL5 был ох как непрост, а про переход на 10.6 я много и громко бурчал и бранился в свое время. Про "переход" с XP на Win7 я вообще говорить не хочу, т.к. без мата не получится.

Путь из 10.6 в 10.7 тоже не оказался выстлан розами, но я ожидал худшего. С точки зрения простого, незамороченного пользователя - все просто и сразу работает. Это я сужу по своему мальчику. Ему 10.7 очень нравится как раз теми вещами, что меня оставляют равнодушным. Например он в восторге от странного Launchpad, любит нечеловеческое направление в жестах и утверждает, что новый Mission Control наконец позволил ему понять, зачем все эти spaces и expose нужны. А когда ноутом с Lion пользуется моя 10ти летняя дочь, то эта вообще особой разницы не замечает. Говорит "стало красивее" но что там красивее - не уточняет.

Для более придирчивого пользователя переход тоже вполне щадящий. Обновление произошло без всякой потери личных данных. Практически все программы из области личного использования продолжили работать. У некоторых программ (например evernote) еще не все ладно с совместимостью, но это скорее на совести разработчиков этих программm а не вина 10.7. Многие программы активно доставляют обновления и оперативно решают проблемы совместимостью, но повторюсь - таких проблемных совсем немного, где-то на грани заметности.

С моими рабочими программами все оказалось несколько хуже. Начиная с того, что Java теперь не идет в комплекте по умолчанию и, что еще хуже, после обновления на Lion просто испаряется с вашего компьютера. Вернуть ее легко, например написав "java" в терминале или попытавшись запустить любую java-требующую программу, но то, что ставится в результате, это далеко не полный комплект. В интернете легко можно найти список дополнительных манипуляций и дополнительных файлов для доустановки. Ничего сложного тут нет, но время это занимает.

С программами, что ставятся из портов тоже кое-что ломается с установкой 10.7 К этому моменту уже вышла новая версия macports для 10.7, и возможно она чинит проблемы, но в любом случае - ее надо устанавливать/обновлять. Также были проблемы с mercurial. Как тот, что в портах, так и тот, что с офф.сайта для 10.7 у меня работали весьма частично. Оба случая видимо чинятся, но пока я не смог заставить версию 1.9 работать стабильно, хотя времени исследовать что ему не хватает у меня еще не было. Видимо тут сказываются тонкости перехода OSX на python 2.7.

С эклипсом тоже не все прошло гладко. На одном из компьютеров после обновления перестал открываться workspace который служил мне верой и правдой последние пару лет. Что там было - понятия не имею. Проблему "решил" переносом с другой машины. На iMac после обновления eclipse стал подвисать и задумываться на ровном месте, чего с ним раньше не наблюдалось. Полная переустановка помогла. Да, речь идет о indigo, так что возможно это и баги свежего эклипса, хотя на SL все вполне достойно работало.

На современных машинах (i7 MBP) впечатления о скорости работы в Lion самые приятные. Все быстро и очень быстро. Я конечно не замерял, но субъективно все работает быстрее чем в SL, ну или как минимум, не медленнее. А вот со "старыми" компьютерами все ровно наоборот. iMac с 3.06 c2d стал работать медленнее. Это опять очень субъективное впечатление не подкрепленное тестами и замерами, но я знаю чего ожидать от этого компьютера и привык к определенным скоростям на SL. Единственное место, где я это торможение смог померить, был полный цикл обработки тяжелого подкаста. Тут падение скорости заметно невооруженным взглядом. С 5х (скорость обработки к реальному времени) эта метрика упала до 3.8х Кто тут виноват сказать трудно, возможно некоторые аудио-плагины должны обновится для Lion, но пока это медленно и это грустный факт.

Вообще, в аудио области можно наблюдать целый ряд досадных, хотя наверное очень экзотических для большинства, проблемок. На машине с несколькими аудио-интерфейсами у Lion "сбилась мушка" и он частично потерял информацию о интерфейсах по умолчанию и их характеристикам. Что особо неприятно - OSX показывает все правильно и все установки на месте, но по факту - все не так. Чинится это легко, переназначением всех параметров, но конечно это не есть хорошо. Программы "захвата" системного звука тоже перестали работать на лету, но это как раз было ожидаемо и часто происходит даже с минорными обновлениями OSX. Обычно, через некоторое время, эти программы обновляются и чинят проблему.

Еще одна, не самая успешная в Lion область - это работа с несколькими экранами. Очень неудачно и непродуманно реализованы полноэкранные режим и центр управления. Полное впечатление, что разработчики просто не тестировали эти вещи на 2х и более мониторах.

С другой, светлой стороны, есть для меня две причины которые оправдывают как и возню с обновлением, так и позволяют смириться с досадными недоработками. Это новый Mail и новый режим полного экрана. Я провожу немало времени в почте и Mail.app для меня собирает как рабочие письма с exchange и imap, так и прочиe/личные по imap. Я справлялся с этой обработкой и в прошлой версии OSX, однако новая почтовая программа заметно удобнее и упрощает очень многие моменты. Особенно радует могучий поиск.

Полный экран для меня важен и приятен в основном в программах удаленного доступа. Иметь в отдельном "виртуальном пространстве" полный экран удаленной машины и переключится туда по нажатию пары клавиш - это не просто приятно но и полезно для моей производительности. И конечно, полноэкранный терминал тоже чрезвычайно крут (а с tmux он вообще ой), если конечно вы знаете зачем вам терминал :)

А вот про серверное обновление я доброго слова сказать не могу. В отличии от обычной, не серверной версии Lion, она даже не смогла стать как следует на мои два mac mini сервера. В одном случае процесс обновления завис на этапе "import OD ..." на несколько часов (рестарт помог), а во втором - система просто не поднялась после перезагрузки :( Пришлось восстанавливать из TM, и со второго раза обновление прошло. Вообще сервер стал сильно примитивней. Раньше его интерфейс позволял тем, кто понимает настраивать многие вещи не покидая уютный GUI. Теперь этот GUI рассчитан на полнейших домохозяек, и не позволяет сделать решительно ничего из того, что мне нужно. Многие сервисы из него просто исчезли. Я подозреваю по причине невозможности их упрощения. От VPN остался огрызок в котором это VPN можно включить, ввести область адресов, задать пароль и назначить пользователей. Возможности выбора протоколов, задание раута, выбор DNS и все прочее, что было в SL server – все это просто пропало. С NAT все еще хуже. Единственное, что теперь можно сделать - это его включить. При этом Lion сам понимает что вы хотели этим сказать и в моем случае он "гениально" догадался что мнe хочется брать с Ethernet и раздавать по wifi. Я же хотел совсем другого. Исчезли и все возможности контроля DNS которые очень неплохо были сделаны в SL. Конечно, я понимаю что все это можно настроить как положено, по гиковски через правильные конфигурационные файлы. Но если так - мне проще поставить linux и с ним гиковаться. OSX server для меня был неплохим и быстрым вариантом простого сервера без затей и без напряжения мозга. Теперь напряжения мозга он не вызывает вообще, но и от функциональности осталось процентов 20, в лучшем случае.

По более мелким и внутренним калечащим изменениям - "поломали" SMB поддержку. Т.е. она не сломана, а наоборот - улучшена. К сожалению, многие сторонние клиенты ее расценивают именно как поломанную и пока не поддерживают. Например, XBMC на АТВ2 перестал работать с Lion SMB shares и когда заработает пока непонятно. Произошли и очередные изменения с NFS, что поломало все на свете не так сильно как в случае с SMB, но тоже может неслабо подпортить кровь.

_Выводы:_ Никаких причин не обновлять новые (i5/i7) маки на Lion я не вижу. Как всегда, дождаться первого обновления и только потом переходить - это мудрая идея, и я ее всем всегда советую хотя сам этому совету не следую. На старых машинках обновится видимо тоже стоит, особенно если у вас есть веская причина. Например если вы активно используете Mail.app. Сервер, на мой взгляд, обновлять не надо и даже категорически противопоказано. Лично я собираюсь оба моих macmini откатить на SL сервер, в очень ближайшем будущем.