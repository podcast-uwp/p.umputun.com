---
title: "Еще один убийца DropBox"
date: 2013-12-19T14:20:40-05:00
draft: false
tags: ["технические темы"]
---

Сегодня получил письмо от ExpanDrive где они поведали о [новом продукте](http://www.expandrive.com/strongsync), который сами описали так:


> We're excited to introduce Strongsync, a Dropbox-like sync app that connects directly to SFTP and Amazon S3. You stay in full control of your data and can easily sync data between all of your machines. Strongsync is currently available for Mac and Windows with Linux support coming early next year.


Т.е. речь идет о как-бы dropbox но со своим "местом базирования" и полным контролем пользователя над всем. Идея хорошая, идея правильная. Да, конечно, мы все знаем о [btsync](http://www.bittorrent.com/sync) которым тоже можно поднять нечто типа локального облака, но у решения с центральным хранилищем могут быть свои плюсы.

<!--more-->

Из этих плюсов я ожидал следующего:

- гарантированная локальность коммуникаций и понятный и проверенный метод шифрования трафика
- возможность размещения центрального хранилища в надежном месте (S3 или собственный SFTP)
- понятный путь создания резервных копий хранилища
- экономия места (Deduplicated content-addressble data storage)
- возможность шифрования в центральном хранилище
- понятный способ расшарить файлы
- версионность данных в центральном хранилище
- достойная скорость работы

Из потенциальных минусов подобного, централизованного подхода в голову приходит только необходимость в центральном месте, где все это будет храниться. Но S3 в качестве такого места предлагает решение, не самое дешевое (100Г будет стоить как минимум $10/месяц), но более чем надежное.

Это все была теория вопроса, но практика оказалась совсем иной. Из моментов которые сразу замечаются, это во первых скорость синхронизации. Она совсем не быстрая. Похоже прямо в их программе синхронизации есть ограничение скорости. В локальной сети скорость заливки на сервер плотно держалась в районе 2.5 MB/s, скорость в другую сторону - до 4 MB/s. Никакого шифрования файлов в хранилище нет. Они там лежат в особом дереве, но не смотря на странные имена их легко найти и открыть. Ну да, нигде не обещали шифровать и данные (только трафик) но согласитесь, это было бы логично.

Еще из того что нет - нет версионности, нет шаринга. Но есть (в отличии от btsync) интеграция с Finder и файлы отмечаются в стиле DropBox зелеными птичками или оранжевым индикатором "в процессе". Кстати, индикатор этот тоже сбивает с толку. Вне зависимости от направления передачи там всегда стрелка вниз, которая мне намекает на то что идет download, но на самом деле это просто индикация любого направления движения данных. Интеграция эта сделана как-то совсем плохо и обновляется через раз. Помогает покликать по файлам и тогда происходит перерисовка этих бейджиков. Как и в dropbox, тут тоже есть единственный каталог (конечно, с подкаталогами) который можно синхронизировать. Одновременно иметь боле одного с разными S3/SFTP никак нельзя. Что касается приема/передачи, то похоже что все строго очередно, т.е. пока один не завершит операцию приема/передачи (оно тоже по файлам, последовательно), второй компьютер курит бамбук.

Теперь что касается главного - надежной работы системы. Тут самым большим сюрпризом для меня оказалось то, что по надежности эта штука совсем не похожа на продукт за который можно просить денег. К сожалению Strongsync это очень и очень суровая beta, а может даже и нечто до того. Оно просто ломается на ровном месте, постоянно. Любой нетривиальный эксперимент мгновенно сводит Strongsync с ума. Например, положить файл на один подключенный компьютер и удалить его в процессе синхронизации. Или создать конфликт, отредактировав файл на двух разных машинках одновременно. Мне, кстати, так и не удалось понять как эта программа разруливает конфликты т.к. она подвисала до того, как конфликт доходил до стадии разруливания. Под "подвисала" я имею ввиду - переставала синхорнизировать в любую сторону. Если войти-выйти, то какая-та жизнь опять начиналась, но как-то очень странно - все файлы отмечались как "в процессе передачи", что-то ходило по сети пару минут, потом все затихало оставляя некототыре файлы в состоянии "передаю" навсегда.

Понять, что именно оно делает тоже трудно. Есть нечто типа индикации текущей операции, но оно обычно говорит "все доставленно" хотя при этом гоняет байтики туда-сюда. Пару раз там было таинственное сообщение "Превышена квота, обновите". Что за квота, и что обновлять - непонятно. Похоже оно вообще не отсюда, тут нет (согласно описанию) никаких квот.

В процессе своих 15ти минутных и вполне тривиальных экспериментов я, похоже, совсем сломал этого коника. Теперь никакие манипуляции не помогают восстановить синхронизированное состояние на 2х подключенных машинках, хотя к чести этого Strongsync он не наделал никакого вреда, т.е. ничего лишнего не удалил. Из хорошего которого не так много - очень экономное использование CPU, хотя до этапа когда там сотни гиг, как в моем btsync или dropbox, я просто не дошел.

Вывод и рекомендация такая: **сыро, очень сыро, чудовищно сыро.** Покупать программу в таком состоянии - это просто глупо. Продавать программу в таком состоянии - это верх наглости. Хотя идея хорошая и есть надежда, что авторы допилят. Из другой продукт ExpanDrive был, в свое время, очень приятной оберткой поверх FUSE и не вызывал подобного удивления своей недоделанностью.
